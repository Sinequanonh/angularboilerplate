{"version":3,"sources":["../app/routes.js"],"names":["config","$urlRouterProvider","$stateProvider","state","url","controller","templateUrl","otherwise","run","$rootScope","$http","$location","$localStorage","currentUser","defaults","headers","common","Authorization","token","$on","event","next","current","publicPages","restrictedPage","indexOf","path"],"mappings":";;AAAA,SAASA,MAAT,CAAgBC,kBAAhB,EAAoCC,cAApC,EAAoD;;AAElDA,iBAAeC,KAAf,CAAqB,MAArB,EAA6B;AAC3BC,SAAK,GADsB;AAE3BC,gBAAY,UAFe;AAG3BC,iBAAa;AAHc,GAA7B;;AAMAJ,iBAAeC,KAAf,CAAqB,OAArB,EAA8B;AAC5BC,SAAK,QADuB;AAE5BC,gBAAY,WAFgB;AAG5BC,iBAAa;AAHe,GAA9B;;AAMAJ,iBAAeC,KAAf,CAAqB,WAArB,EAAkC;AAChCC,SAAK,YAD2B;AAEhCC,gBAAY,UAFoB;AAGhCC,iBAAa;AAHmB,GAAlC;;AAMAL,qBAAmBM,SAAnB,CAA6B,GAA7B;AACD;;AAED,SAASC,GAAT,CAAaC,UAAb,EAAyBC,KAAzB,EAAgCC,SAAhC,EAA2CC,aAA3C,EAA0D;AACxD,MAAIA,cAAcC,WAAlB,EAA+B;AAC7BH,UAAMI,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA8C,YAAYL,cAAcC,WAAd,CAA0BK,KAApF;AACD;;AAEDT,aAAWI,WAAX,GAAyBD,cAAcC,WAAvC;;AAEAJ,aAAWU,GAAX,CAAe,sBAAf,EAAuC,UAASC,KAAT,EAAgBC,IAAhB,EAAsBC,OAAtB,EAA+B;AACpE,QAAIC,cAAc,CAAC,GAAD,EAAM,QAAN,CAAlB;AACA,QAAIC,iBAAiBD,YAAYE,OAAZ,CAAoBd,UAAUe,IAAV,EAApB,MAA0C,CAAC,CAAhE;AACA,QAAIF,kBAAkB,CAACZ,cAAcC,WAArC,EAAkD;AAChDF,gBAAUe,IAAV,CAAe,QAAf;AACD;AACF,GAND;AAOD","file":"routes.js","sourcesContent":["function config($urlRouterProvider, $stateProvider) {\n\n  $stateProvider.state('home', {\n    url: '/',\n    controller: 'homeCtrl',\n    templateUrl: 'app/home/home.html',\n  })\n\n  $stateProvider.state('login', {\n    url: '/login',\n    controller: 'loginCtrl',\n    templateUrl: 'app/login/login.html',\n  })\n\n  $stateProvider.state('dashboard', {\n    url: '/dashboard',\n    controller: 'homeCtrl',\n    templateUrl: 'app/dashboard/dashboard.html',\n  })\n  \n  $urlRouterProvider.otherwise('/')\n} \n\nfunction run($rootScope, $http, $location, $localStorage) {\n  if ($localStorage.currentUser) {\n    $http.defaults.headers.common.Authorization = 'Bearer ' + $localStorage.currentUser.token;\n  }\n\n  $rootScope.currentUser = $localStorage.currentUser\n\n  $rootScope.$on('$locationChangeStart', function(event, next, current) {\n    var publicPages = ['/', '/login'];\n    var restrictedPage = publicPages.indexOf($location.path()) === -1;\n    if (restrictedPage && !$localStorage.currentUser) {\n      $location.path('/login');\n    }\n  })\n}\n"]}