{"version":3,"sources":["../../app/auth/authSvc.js"],"names":["app","service","$http","$localStorage","$rootScope","cfg","console","log","Login","email","password","callback","params","get","url","port","then","response","data","token_session","currentUser","token","defaults","headers","common","Authorization","Logout"],"mappings":";;AAAAA,IAAIC,OAAJ,CAAY,SAAZ,EAAuB,UAASC,KAAT,EAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,GAA3C,EAAgD;AACrEC,UAAQC,GAAR,CAAY,cAAZ;AACA,MAAMN,UAAU,EAAhB;;AAEA,WAASO,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgCC,QAAhC,EAA0C;;AAExC,QAAIC,SAAS;AACXH,kBADW;AAEXC;AAFW,KAAb;;AAKAR,UAAMW,GAAN,CAAUR,IAAIS,GAAJ,GAAU,GAAV,GAAgBT,IAAIU,IAApB,GAA2B,aAArC,EAAoD,EAAEH,QAAQA,MAAV,EAApD,EACGI,IADH,CACQ,UAASC,QAAT,EAAmB;AACvB,UAAIA,SAASC,IAAT,CAAcC,aAAlB,EAAiC;AAC/BhB,sBAAciB,WAAd,GAA4B;AAC1BX,iBAAOA,KADmB;AAE1BY,iBAAOJ,SAASC,IAAT,CAAcC;AAFK,SAA5B;AAIAf,mBAAWgB,WAAX,GAAyBjB,cAAciB,WAAvC;AACAlB,cAAMoB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,eAAwDR,SAASC,IAAT,CAAcC,aAAtE;AACAR,iBAAS,IAAT;AACD,OARD,MAQO;AACLA,iBAAS,KAAT;AACD;AACF,KAbH;AAcD;;AAEF,WAASe,MAAT,GAAkB;AACf,WAAOvB,cAAciB,WAArB;AACA,WAAOhB,WAAWgB,WAAlB;AACAlB,UAAMoB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA8C,EAA9C;AACD;;AAEDxB,UAAQO,KAAR,GAAgBA,KAAhB;AACAP,UAAQyB,MAAR,GAAiBA,MAAjB;;AAEA,SAAOzB,OAAP;AACD,CArCD","file":"authSvc.js","sourcesContent":["app.service('authSvc', function($http, $localStorage, $rootScope, cfg) {\n  console.log('Auth Service')\n  const service = {}\n\n  function Login(email, password, callback) {\n\n    var params = {\n      email,\n      password,\n    }\n\n    $http.get(cfg.url + ':' + cfg.port + '/api/signin', { params: params })\n      .then(function(response) {\n        if (response.data.token_session) {\n          $localStorage.currentUser = {\n            email: email,\n            token: response.data.token_session,\n          }\n          $rootScope.currentUser = $localStorage.currentUser\n          $http.defaults.headers.common.Authorization = `Bearer ${response.data.token_session}`\n          callback(true)\n        } else {\n          callback(false)\n        }\n      })\n  }\n\n function Logout() {\n    delete $localStorage.currentUser\n    delete $rootScope.currentUser\n    $http.defaults.headers.common.Authorization = ''\n  }\n\n  service.Login = Login\n  service.Logout = Logout\n\n  return service\n})\n"]}